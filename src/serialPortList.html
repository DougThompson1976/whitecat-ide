<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="icon.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="lib/bootstrap/css/bootstrap-theme.min.css">
  
  <script src="lib/jquery-1.12.3.min.js"></script>
  
  <script src="lib/bootstrap/js/bootstrap.min.js"></script>
  <script src="lib/bootstrap/js/bootstrap-dialog.js"></script>
  <script src="lib/bootstrap/js/bootbox.min.js"></script>
  
  <script src="code.js"></script>
  <script src="adapters/adapter.js"></script>
  <script src="aceeditor/ace.js"></script>
  <script src="aceeditor/ext-language_tools.js"></script>
</head>
<body>
  <div id="ports" style="margin: 10px 10px 10px 10px;"></div>
</body>
</html>
<script>

function list() {
	chrome.serial.getDevices(function(ports) {
		var port;
		var html;

		var container = jQuery('#ports');	
		
		html  = 'Connected serial port adapters for platform: ' + window.navigator.platform + '<br><br>';
		html += '<table class="table table-striped">';
		html += '<thead>';
		html += '<th>path</th>';
		html += '<th>displayname</th>';
		html += '</thead>';
		html += '<tbody>';
		
		// Process all ports and update previous ports with changes
		for(port = 0;port < ports.length;port++) {	
			html += '<tr><td>' + ports[port].path + '</td><td>' + ports[port].displayName + '</td></tr>';			
		}

		html += '</tbody>';
		html += '</table>';
		html += '</table>';

		container.html(html);	
	});
}

window.addEventListener('load', function() {
	list();	
});
</script>